<header class="topbar glass">
  <div class="brand">
    <h1>iv-flow</h1>
    <p>Editor visual de automatizaci√≥n e IA</p>
  </div>

  <div class="actions" role="toolbar" aria-label="Barra de herramientas principal">
    <div class="flow-name-group">
      <label class="input-label" for="flow-name-input">Flujo</label>
      <input
        id="flow-name-input"
        [ngModel]="flowName"
        (ngModelChange)="flowNameChange.emit($event)"
        placeholder="Nombre del flujo"
        aria-label="Nombre del flujo" />
    </div>

    <details class="toolbar-menu">
      <summary>Archivo</summary>
      <div class="menu-content">
        <button type="button" (click)="newFlow.emit()">Nuevo</button>
        <button type="button" (click)="saveFlow.emit()">Guardar</button>
        <button type="button" (click)="exportFlow.emit()">Exportar JSON</button>
        <button type="button" (click)="exportFlowAsMarkdown.emit()">Exportar MD</button>
        <label class="file-input" title="Importar flujo desde archivo JSON">
          Importar JSON
          <input type="file" accept="application/json" (change)="importFlow.emit($event)" />
        </label>
      </div>
    </details>

    <details class="toolbar-menu">
      <summary>Edici√≥n</summary>
      <div class="menu-content menu-content-inline">
        <button type="button" (click)="undo.emit()" title="Deshacer">‚Ü∂ Deshacer</button>
        <button type="button" (click)="redo.emit()" title="Rehacer">‚Ü∑ Rehacer</button>
        <button type="button" (click)="validateFlow.emit()" title="Validar flujo">‚úì Validar</button>
      </div>
    </details>

    <details class="toolbar-menu">
      <summary>Herramientas</summary>
      <div class="menu-content">
        <button type="button" (click)="toggleContentManager.emit()">Gestor de contenido</button>
        <button type="button" (click)="toggleMarkdownStudio.emit()">Markdown Studio</button>
        <button type="button" (click)="toggleBottomPanelsOrder.emit()">Intercambiar paneles inferiores</button>
      </div>
    </details>

    <button class="primary run-cta" type="button" (click)="runFlow.emit()" [disabled]="running">
      {{ running ? 'Ejecutando‚Ä¶' : 'Ejecutar flujo' }}
    </button>

    <button class="theme-toggle" type="button" (click)="toggleDarkMode.emit()" [attr.aria-label]="darkMode ? 'Cambiar a modo claro' : 'Cambiar a modo oscuro'">
      {{ darkMode ? '‚òÄÔ∏è' : 'üåô' }}
    </button>
  </div>
</header>

<section class="tutorial" *ngIf="showTutorial">
  <div class="tutorial-wrap">
    <div class="tutorial-content">
      <strong>Tutorial:</strong> {{ tutorialText }}
      <button type="button" (click)="nextTutorialStep.emit()">Siguiente paso</button>
    </div>
    <div class="demo-actions">
      <button type="button" *ngFor="let demo of demos; let i = index" (click)="loadDemo.emit(i)">Cargar {{ demo.name }}</button>
    </div>
  </div>
  <button class="close-tutorial" type="button" (click)="closeTutorial.emit()" aria-label="Cerrar tutorial">‚úï</button>
</section>
