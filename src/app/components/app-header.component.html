<header class="topbar glass">
  <div class="brand">
    <h1>iv-flow</h1>
    <p>Editor visual de automatizaci√≥n e IA</p>
  </div>

  <div class="actions" role="toolbar" aria-label="Acciones principales del flujo">
    <div class="action-group action-group--flow">
      <label class="input-label" for="flow-name-input">Flujo</label>
      <input
        id="flow-name-input"
        [ngModel]="flowName"
        (ngModelChange)="flowNameChange.emit($event)"
        placeholder="Nombre del flujo"
        aria-label="Nombre del flujo" />
      <button class="primary" type="button" (click)="newFlow.emit()" title="Crear un nuevo flujo">Nuevo</button>
      <button type="button" (click)="saveFlow.emit()" title="Guardar flujo actual">Guardar</button>
    </div>

    <div class="action-group action-group--edit">
      <span class="action-group-title">Edici√≥n</span>
      <button type="button" (click)="undo.emit()" title="Deshacer √∫ltimo cambio">Deshacer</button>
      <button type="button" (click)="redo.emit()" title="Rehacer √∫ltimo cambio">Rehacer</button>
      <button type="button" (click)="validateFlow.emit()" title="Validar estructura del flujo">Validar</button>
      <button class="primary" type="button" (click)="runFlow.emit()" [disabled]="running" title="Ejecutar flujo">
        {{ running ? 'Ejecutando‚Ä¶' : 'Ejecutar' }}
      </button>
    </div>

    <div class="action-group action-group--tools">
      <span class="action-group-title">Recursos</span>
      <button type="button" (click)="toggleContentManager.emit()">Gestor de contenido</button>
      <button type="button" (click)="toggleMarkdownStudio.emit()">Markdown Studio</button>
      <button type="button" (click)="toggleDarkMode.emit()" [attr.aria-label]="darkMode ? 'Cambiar a modo claro' : 'Cambiar a modo oscuro'">
        {{ darkMode ? '‚òÄÔ∏è Claro' : 'üåô Oscuro' }}
      </button>
    </div>

    <div class="action-group action-group--io">
      <span class="action-group-title">Importar/Exportar</span>
      <button type="button" (click)="exportFlow.emit()">Exportar JSON</button>
      <button type="button" (click)="exportFlowAsMarkdown.emit()">Exportar MD</button>
      <label class="file-input" title="Importar flujo desde archivo JSON">
        Importar JSON
        <input type="file" accept="application/json" (change)="importFlow.emit($event)" />
      </label>
    </div>
  </div>
</header>

<section class="tutorial" *ngIf="showTutorial">
  <div class="tutorial-wrap">
    <div class="tutorial-content">
      <strong>Tutorial:</strong> {{ tutorialText }}
      <button type="button" (click)="nextTutorialStep.emit()">Siguiente paso</button>
    </div>
    <div class="demo-actions">
      <button type="button" *ngFor="let demo of demos; let i = index" (click)="loadDemo.emit(i)">Cargar {{ demo.name }}</button>
    </div>
  </div>
  <button class="close-tutorial" type="button" (click)="closeTutorial.emit()" aria-label="Cerrar tutorial">‚úï</button>
</section>
