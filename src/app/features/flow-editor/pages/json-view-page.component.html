<section class="panel">
  <h2>Vista JSON</h2>
  <p>Importa/exporta el flujo actual y usa el editor manual para ajustes avanzados.</p>

  <div class="actions">
    <button type="button" (click)="downloadJson()">Descargar JSON</button>
    <label>
      Importar archivo JSON
      <input #fileInput type="file" accept="application/json,.json" (change)="onFilePicked($event)" />
    </label>
  </div>

  <label>
    Editor avanzado (textarea)
    <textarea
      rows="18"
      [ngModel]="jsonDraft()"
      (ngModelChange)="onJsonDraftChange($event)"
      spellcheck="false"
    ></textarea>
  </label>

  <button type="button" (click)="loadFromTextarea()">Cargar desde textarea</button>

  @if (message(); as infoMessage) {
    <p class="message success">{{ infoMessage }}</p>
  }

  @if (error(); as errorMessage) {
    <p class="message error">{{ errorMessage }}</p>
  }
</section>
